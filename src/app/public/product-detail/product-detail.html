<div class="product-detail-container" *ngIf="product; else loading">
  <div class="breadcrumb">
    <a routerLink="/products">Products</a> / <span>Product Details</span>
  </div>

  <div class="product-detail">
    <div class="product-image">
      <div class="carousel">
        <button class="carousel-btn prev" (click)="prevImage()" *ngIf="productImages.length > 1">‹</button>
        <img [src]="productImages[currentImageIndex] || product?.image" [alt]="product?.name" />
        <button class="carousel-btn next" (click)="nextImage()" *ngIf="productImages.length > 1">›</button>
      </div>

      <div class="thumbnails" *ngIf="productImages.length > 1">
        <img *ngFor="let img of productImages; let i = index"
             [src]="img"
             (click)="selectImage(i)"
             [class.active]="i === currentImageIndex"
             [alt]="product?.name + ' thumbnail ' + (i+1)" />
      </div>
    </div>

    <div class="product-info">
      <h1>{{ product?.name }}</h1>
      
      <div class="product-rating">
        <span class="stars">
          <ng-container *ngFor="let n of [1,2,3,4,5]; let i = index">
            <span class="star" [class.filled]="i < (product?.rating || 5)">★</span>
          </ng-container>
        </span>
        <span class="reviews">({{ product?.reviews || 0 }} reviews)</span>
      </div>

      <div class="product-price">
        <span class="price">₹{{ product?.price }}</span>
      </div>

      <div class="product-material">
        <strong>Material:</strong> {{ product?.material }}
      </div>

      <div class="product-description">
        <h3>Description</h3>
        <p>{{ product?.description }}</p>
      </div>

      <div class="product-actions">
        <div class="quantity-selector">
          <button (click)="decreaseQuantity()" class="qty-btn">-</button>
          <span class="quantity-display">{{ quantity }}</span>
          <button (click)="increaseQuantity()" class="qty-btn">+</button>
        </div>
        <button class="btn btn-primary btn-lg" (click)="addToCart()">
          Add to Cart
        </button>
      </div>

      <div class="product-features">
        <h3>Features</h3>
        <ul>
          <li>Handcrafted with premium materials</li>
          <li>Eco-friendly production</li>
          <li>Fast and secure shipping</li>
          <li>30-day return policy</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="loading">
    Loading product details...
  </div>
</ng-template>
